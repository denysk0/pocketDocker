@startuml
start
:User runs `pocketdocker run` with flags;
:CLI parses arguments;
if (args valid?) then (yes)
  :Build ContainerConfig;
  split
    :Store image metadata in SQLite;
  split again
    :Call Isolator.SetupNamespaces();
    :Mount rootfs + /proc;
  end split
  :Call CgroupManager.Apply();
  :Invoke Container.Start();
  :Save container record in Store;
  :Print Container ID;
else (no)
  :Print usage/error;
endif
stop
@enduml